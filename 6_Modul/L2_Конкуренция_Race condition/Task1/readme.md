# Домашнее задание к занятию «Конкуренция, состояние гонки»

### Цель задания

1. Создать программы, защищённые от блокировок. 
2. Научиться использовать мьютексы и атомарные операции.
3. Научиться избегать взаимных блокировок.

------

### Задание 1

#### Атомарная очередь клиентов

Нужно модифицировать [задание 1 к первому уроку](https://github.com/netology-code/map-homeworks/tree/main/01) так, чтобы счётчик клиентов был атомарным.<br/>
Все операции со счётчиков должны быть атомарными.<br/>
Проверьте работу различными способами упорядочения доступа к памяти.

### Задание 2

#### Прогресс-бар

Создайте консольное приложение для имитации многопоточного расчёта.<br/>
Количество потоков, длина расчёта должны быть заданы переменными.<br/>
В консоль во время работы программы должны построчно для каждого потока выводиться:

	• номер потока по порядку;
	
	• идентификатор потока;
	
	• заполняющийся индикатор наподобие прогресс-бара, визуализирующий процесс «расчёта»;
	
	• после завершения работы каждого потока в соответствующей строке суммарное время, затраченное на работу потока.
 
 Строки прогресс-баров каждого потока должны выводиться одновремено. Время появления каждого нового символа в строке прогресс-бара подберите так, чтобы процесс заполнения строки был виден. Пример работы программы [по ссылке.]( https://cloud.mail.ru/public/MZVL/AqpmAkcMp)


#### Дополнение к заданию 2*

Во время очередной итерации «расчёта» сымитируйте со случайной вероятностью возникновение ошибки (exception), которая не должна приводить к прекращению работы потока или программы. При этом этот факт должен визуализироваться отдельным цветом на прогресс-баре.

### Задание 3

#### Защищённый обмен данными

- Создайте класс Data, содержащий в качестве полей скалярные данные и мьютекс.
- Создайте функцию swap, которая принимает ссылки на два объекта класса Data и обменивает их местами.<br/>
- В функциях нужно сначала захватить мьютексы обоих объектов, а затем выполнить обмен данными.
- Реализуйте три варианта этой функции: при помощи lock, scoped_lock и unique_lock.

------

### Правила приёма домашней работы

Чтобы сдать домашнее задание, прикрепите в личном кабинете ссылку на ваш репозиторий.

### Критерии оценки домашней работы

1. В личном кабинете прикреплена ссылка на репозиторий с кодом для заданий 1, 2 и 3.
2. В ссылке содержится код, который при запуске выполняет описанный в задании алгоритм.


